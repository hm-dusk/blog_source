---
title: 实习周报（持续更新）
date: 2017-07-14 17:15:19
categories: 实习任务
tags: [md5,文件处理,分词]
password: password
---
实习任务汇总
<!-- more -->
# 第一周实习任务

## 一、在step2中实现上传文件按照内容、文件名、文件路径进行重新分类
遇到的问题：
	1、保存文件时，该文件相应的FileInfo的信息保存错误
	2、获取文件上级目录名称时，	取的文件路径分隔符为Windows的分隔符，
	在Linux下不适用，导致在本地运行成功，在服务器上运行出错
解决方法：
	1、将方法传入的FileInfo作为新文件的FileInfo，而不是重新创建一个FileInfo
	2、将文件路径分隔符换成操作系统通用的标识

## 二、解决上传文件名称存在相同但是内容不同的问题
>>之前遇到文件名相同的情况都是直接覆盖掉，这种处理方式不佳

遇到的问题：
	1、怎么进行文件内容是否相同的判断
	2、新上传的文件怎么和原文件进行文件名称上的区分
解决方法：
	1、利用文件的MD5值来进行文件内容是否一致的判断
	2、由于要做到唯一标识的效果，就采用了在新上传文件后面加上当前时间的标识

## 三、学习数据结构、设计模式
看了一下设计模式，修改了一部分代码。
例：将IsClass类中的经常被外部调用的方法改为静态方法，这样做不用每次调用就去生成一个对象，节省了时间和空间。

# 第二周实习任务
## 一、基于分词的文件名称拆分方案
**按文件名拆分的时候可以像按路径名拆分一样，为用户提供多级拆分方案**

```
例如：
冷却水每天.csv
冷却水每小时.csv
锅炉水每天.csv
锅炉水每小时.csv

四个文件，指向按文件名拆分，会有二级提示：
	每小时/每天
点击之后分为两类:
每小时
	冷却水每小时.csv
	锅炉水每小时.csv
每天
	冷却水每天.csv
	锅炉水每天.csv
```
初步决定为三步：
### 1.编写消除文件名中特殊字符（虚拟词、空格等）的方法
该方法为拆分方案做准备，去掉特殊字符，去掉时间数字，去掉空格
### 2.编写按文件名分词拆分方案方法
根据文件名，利用分词判断出拆分方案，返回给前端

```
在该部分代码编写时，发现加载分词SegPos很慢，然而以前的系统每次使用都采用了重新加载的方式，导致效率低下

解决方案：
另外写一个SegUtils类用来提供有关分词的一切方法。
在该类中有静态变量SegPos和静态变量SegOnly，两个静态变量都是在静态代码块中进行初始化，该类为外部提供获取两个变量的get方法。
这样，以后只需要加载一次SegUtils类，其他地方使用SegPos就不用等很久了。

结论：提高了分词加载时的效率。
```

### 3.编写按文件名拆分方法，用到上面的工具方法
```
遇到之前的一个bug：
新上传文件的时候，如果上传的Excel表有一个sheet为空，则不会创建相应的csv文件，但是遍历的时候却要去遍历，会抛出空指针异常
（已解决）
```

## 二、Excel表头相似性判断方法优化
（发现问题比较多，商讨后决定由算法的同事来提供一个方案）

## 三、熟悉数据结构知识，优化代码

## 四、利用空余时间搭建非关系型数据库（根据石墨文档来搭建），并提出文档的不足
（未完成）

# 第三周实习任务
## 一、针对所有功能尤其是单元测试时，有对应的数据集来正反验证

## 二、基于分词的文件拆分方案完善
>在过滤文件名时，添加dictionary.txt文件，里面有大部分需要去掉的汉字，利用读取文件的方式来循环过滤汉字

>在调用分词时，发现“每小时”分词会自动分成“每”和“小时”，解决方案：
在调用分词拆分方法之前，调用库里面的自定义拆分方案，也就是将“每小时/每天”存到库里面（初步定义一个txt文件来储存），当文件名之中存在这种字符时，就直接按照这种方案拆分

## 三、众多表分类算法的java实现，需与算法同学沟通
（算法部分未完成）

## 四、石墨文档中的数据库资料实现一遍，需与郑果沟通
>实现了mongoDB的复制集的搭建

## 五、表头识别增加数值数据的判断准则
(未完成)
## 六、在以上表头识别的基础上，利用数值型（时间型）切换成字符型时就判断成表尾
同上

# 第四周实习任务
## 一、跟踪超越的聚类算法方案（多表分类）
（没做完）
## 二、按照之前的简单方案实现以下表头识别功能的优化
基本实现，利用权值判断实现表头判断（后来弃用）
## 三、思考一下如何更好的实现表尾识别
（表头表尾功能最后交给算法小宝完成）
## 四、熟悉一下项目数据整体打包方案（在“我的文件”中可以查找）
## 五、跟术江找数据库实施的相关事情
并没有相关的事可以做。。。
## 六、跟黄煜了解最近两周的功能新增和升级的情况，重新绘制step1、step2的程序流程图
完成

# 第五周实习任务
## 一、实现时间列映射的思路，绘制流程图
完成
## 二、熟悉新框架，尝试移植功能
完成
## 三、根据小宝提供的表头表尾识别功能，用java实现
后来交给术江完成
## 四、根据算法做的分类算法，用java实现
同上

# 第六周实习任务
## 一、完成上传Excel、分块上传、数据集分类、合并文件、表头表尾识别这五项功能的更改和移植，以便step3可以正常移植
## 二、完成以上功能后，Step1、2还剩：按文件名和路径拆分、上传新文件、拖动文件、拖动修改表头位置、字段名重置、单位行的识别
